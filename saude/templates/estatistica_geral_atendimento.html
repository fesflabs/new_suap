{% extends super_template %}

{% block content %}

<div class="search-and-filters">
    {% render_form form %}
</div>

{% if aluno.exists %}
    <div class="results">
        <table>
            <thead>
                <tr>
                    <th rowspan="2">Campus</th>
                    <th rowspan="2">Curso</th>
                    <th rowspan="2">{{ titulo_qtd_aluno }}</th>
                    <th colspan="3">Atendimentos</th>
                    <th colspan="3">Avaliação Biomédica</th>
                    <th colspan="3">Médico/Enfermagem</th>
                    <th colspan="3">Odontologia</th>
                    <th colspan="3">Psicologia</th>
                    <th colspan="3">Nutrição</th>
                    <th colspan="3">Fisioterapia</th>
                    <th colspan="3">Multidisciplinar</th>
                </tr>
                <tr>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                    <th>Em Aberto</th>
                    <th>Fechados</th>
                    <th>Cancelados</th>
                </tr>
            </thead>
            <tbody>
                {% for linha in lista %}
                    <tr>

                        <td>{{ linha.curso.diretoria.setor.uo.sigla }}</td>
                        <td>{{ linha.curso.descricao }}</td>
                        <td class="text-end">{{ linha.qtd_alunos_ativos }}</td>

                        <td class="text-end">{{ linha.qtd_atendimentos_abertos }}</td>
                        <td class="text-end">{{ linha.qtd_atendimentos_fechados }}</td>
                        <td class="text-end">{{ linha.qtd_atendimentos_cancelados }}</td>

                        <td class="text-end">{{ linha.avaliacao_biomedica_em_aberto }}</td>
                        <td class="text-end">{{ linha.avaliacao_biomedica_fechado }}</td>
                        <td class="text-end">{{ linha.avaliacao_biomedica_cancelado }}</td>

                        <td class="text-end">{{ linha.medico_enfermagem_em_aberto }}</td>
                        <td class="text-end">{{ linha.medico_enfermagem_fechado }}</td>
                        <td class="text-end">{{ linha.medico_enfermagem_cancelado }}</td>

                        <td class="text-end">{{ linha.odonto_em_aberto }}</td>
                        <td class="text-end">{{ linha.odonto_fechado }}</td>
                        <td class="text-end">{{ linha.odonto_cancelado }}</td>

                        <td class="text-end">{{ linha.psicologia_em_aberto }}</td>
                        <td class="text-end">{{ linha.psicologia_fechado }}</td>
                        <td class="text-end">{{ linha.psicologia_cancelado }}</td>

                        <td class="text-end">{{ linha.nutricao_em_aberto }}</td>
                        <td class="text-end">{{ linha.nutricao_fechado }}</td>
                        <td class="text-end">{{ linha.nutricao_cancelado }}</td>

                        <td class="text-end">{{ linha.fisio_em_aberto }}</td>
                        <td class="text-end">{{ linha.fisio_fechado }}</td>
                        <td class="text-end">{{ linha.fisio_cancelado }}</td>

                        <td class="text-end">{{ linha.multi_em_aberto }}</td>
                        <td class="text-end">{{ linha.multi_fechado }}</td>
                        <td class="text-end">{{ linha.multi_cancelado }}</td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="2">Total:</td>
                    <td>{{ totais.total_alunos_ativos }}</td>

                    <td>{{ totais.total_atendimentos_abertos }}</td>
                    <td>{{ totais.total_atendimentos_fechados }}</td>
                    <td>{{ totais.total_atendimentos_cancelados }}</td>

                    <td>{{ totais.total_avaliacao_biomedica_em_aberto }}</td>
                    <td>{{ totais.total_avaliacao_biomedica_fechado }}</td>
                    <td>{{ totais.total_avaliacao_biomedica_cancelado }}</td>

                    <td>{{ totais.total_medico_enfermagem_em_aberto }}</td>
                    <td>{{ totais.total_medico_enfermagem_fechado }}</td>
                    <td>{{ totais.total_medico_enfermagem_cancelado }}</td>

                    <td>{{ totais.total_odonto_em_aberto }}</td>
                    <td>{{ totais.total_odonto_fechado }}</td>
                    <td>{{ totais.total_odonto_cancelado }}</td>

                    <td>{{ totais.total_psicologia_em_aberto }}</td>
                    <td>{{ totais.total_psicologia_fechado }}</td>
                    <td>{{ totais.total_psicologia_cancelado }}</td>

                    <td>{{ totais.total_nutricao_em_aberto }}</td>
                    <td>{{ totais.total_nutricao_fechado }}</td>
                    <td>{{ totais.total_nutricao_cancelado }}</td>

                    <td>{{ totais.total_fisio_em_aberto }}</td>
                    <td>{{ totais.total_fisio_fechado }}</td>
                    <td>{{ totais.total_fisio_cancelado }}</td>

                    <td>{{ totais.total_multi_em_aberto }}</td>
                    <td>{{ totais.total_multi_fechado }}</td>
                    <td>{{ totais.total_multi_cancelado }}</td>
                </tr>
            </tfoot>
        </table>
    </div>
{% elif form.is_bound %}
    <p class="msg alert">A busca realizada não encontrou nenhum resultado.</p>
{% else %}
    <p class="msg alert">Por favor, informe os parâmetros da busca.</p>
{% endif %}

{% endblock %}