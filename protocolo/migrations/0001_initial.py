# -*- coding: utf-8 -*-
# Generated by Django 1.11.23 on 2019-08-14 14:54


import comum.utils
from django.db import migrations, models
import django.db.models.deletion
import djtools.db.models
import djtools.middleware.threadlocals
import djtools.unaccent_field


class Migration(migrations.Migration):

    initial = True

    dependencies = [('comum', '0002_auto_20190814_1443'), ('rh', '0001_initial')]

    operations = [
        migrations.CreateModel(
            name='Processo',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_cadastro', models.DateTimeField(auto_now_add=True)),
                ('interessado_nome', djtools.unaccent_field.UnaccentField(db_index=True, max_length=200, verbose_name='Nome do Interessado')),
                ('interessado_documento', models.CharField(max_length=20, verbose_name='CPF/CNPJ do Interessado')),
                ('interessado_pf', models.BooleanField(default=True, verbose_name='É Pessoa Física?')),
                ('interessado_email', models.EmailField(blank=True, max_length=254, verbose_name='Email do Interessado')),
                ('interessado_telefone', djtools.db.models.CharFieldPlus(blank=True, max_length=255, null=True, verbose_name='Telefone do Interessado')),
                ('numero_processo', models.CharField(editable=False, max_length=25, unique=True, verbose_name='Número do Processo')),
                ('numero_processo_eletronico', models.CharField(blank=True, editable=False, max_length=25, null=True, verbose_name='Número do Processo Eletrônico')),
                ('numero_documento', models.CharField(blank=True, max_length=25, null=True, verbose_name='Número do Documento')),
                ('assunto', models.CharField(max_length=100)),
                ('tipo', models.PositiveIntegerField(choices=[[1, 'Memorando'], [2, 'Ofício'], [3, 'Requerimento']])),
                ('status', models.PositiveIntegerField(choices=[[1, 'Em trâmite'], [2, 'Finalizado'], [3, 'Arquivado']], default=1, editable=False, verbose_name='Situação')),
                ('palavras_chave', models.TextField(null=True, verbose_name='Palavras-chave')),
                ('data_finalizacao', models.DateTimeField(editable=False, null=True)),
                ('observacao_finalizacao', models.TextField(blank=True, null=True, verbose_name='Despacho')),
                ('search', djtools.db.models.SearchField(blank=True, default='', editable=False)),
                (
                    'setor_origem',
                    djtools.db.models.ForeignKeyPlus(
                        default=comum.utils.get_setor, editable=False, on_delete=django.db.models.deletion.CASCADE, to='rh.Setor', verbose_name='Setor de Origem'
                    ),
                ),
                ('uo', djtools.db.models.ForeignKeyPlus(editable=False, on_delete=django.db.models.deletion.CASCADE, to='rh.UnidadeOrganizacional')),
                (
                    'vinculo_cadastro',
                    djtools.db.models.ForeignKeyPlus(
                        default=djtools.middleware.threadlocals.get_vinculo,
                        editable=False,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name='processos_cadastro',
                        to='comum.Vinculo',
                    ),
                ),
                (
                    'vinculo_finalizacao',
                    djtools.db.models.ForeignKeyPlus(
                        editable=False, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='processos_finalizacao', to='comum.Vinculo'
                    ),
                ),
            ],
            options={
                'verbose_name': 'Processo',
                'verbose_name_plural': 'Processos',
                'permissions': (
                    ('pode_editar_processo_em_tramite', 'Pode editar processo em trâmite'),
                    ('pode_editar_processo_sem_tramite_completo', 'Pode editar processo sem trâmite completo'),
                    ('pode_gerar_capa', 'Pode gerar capa'),
                    ('pode_imprimir_comprovante', 'Pode imprimir comprovante'),
                    ('pode_ver_processo', 'Pode ver processo'),
                    ('pode_tramitar_processo', 'Pode tramitar processo'),
                ),
            },
        ),
        migrations.CreateModel(
            name='TempoAnalise',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tempo_maximo', models.PositiveIntegerField(verbose_name='Tempo máximo do processo em análise')),
                ('setor', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='rh.Setor')),
            ],
            options={'verbose_name': 'Tempo de análise', 'verbose_name_plural': 'Tempos de análise'},
        ),
        migrations.CreateModel(
            name='TempoTramite',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tempo_maximo', models.PositiveIntegerField()),
                ('uo_destino', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, related_name='tempo_tramite_destino', to='rh.UnidadeOrganizacional')),
                ('uo_origem', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, related_name='tempo_tramite_origem', to='rh.UnidadeOrganizacional')),
            ],
            options={'verbose_name': 'Tempo de trâmite', 'verbose_name_plural': 'Tempos de trâmite'},
        ),
        migrations.CreateModel(
            name='Tramite',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ordem', models.PositiveIntegerField()),
                ('ultimo', models.BooleanField(default=False)),
                ('tipo_encaminhamento', models.PositiveIntegerField(choices=[[1, 'Interno'], [2, 'Externo']], default=1)),
                ('data_encaminhamento', models.DateTimeField(db_index=True)),
                ('observacao_encaminhamento', models.TextField(blank=True, null=True, verbose_name='Despacho')),
                ('data_recebimento', models.DateTimeField(db_index=True, null=True)),
                ('observacao_recebimento', models.TextField(blank=True, null=True, verbose_name='Despacho')),
                (
                    'orgao_interno_encaminhamento',
                    djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tramites_internos_encaminhados_set', to='rh.Setor'),
                ),
                (
                    'orgao_interno_recebimento',
                    djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tramites_internos_recebidos_set', to='rh.Setor'),
                ),
                (
                    'orgao_vinculo_externo_encaminhamento',
                    djtools.db.models.ForeignKeyPlus(
                        null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tramites_vinculos_externos_encaminhados_set', to='comum.Vinculo'
                    ),
                ),
                (
                    'orgao_vinculo_externo_recebimento',
                    djtools.db.models.ForeignKeyPlus(
                        null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tramites_vinculos_externos_recebidos_set', to='comum.Vinculo'
                    ),
                ),
                ('processo', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='protocolo.Processo')),
                (
                    'vinculo_encaminhamento',
                    djtools.db.models.ForeignKeyPlus(
                        default=djtools.middleware.threadlocals.get_vinculo,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name='tramites_vinculos_encaminhados_set',
                        to='comum.Vinculo',
                    ),
                ),
                (
                    'vinculo_recebimento',
                    djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tramites_vinculos_recebidos_set', to='comum.Vinculo'),
                ),
            ],
            options={'ordering': ['ordem']},
        ),
        migrations.AlterUniqueTogether(name='tempotramite', unique_together=set([('uo_origem', 'uo_destino')])),
    ]
