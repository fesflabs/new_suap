# -*- coding: utf-8 -*-
# Generated by Django 1.11.23 on 2019-08-14 14:54


from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import djtools.db.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [migrations.swappable_dependency(settings.AUTH_USER_MODEL)]

    operations = [
        migrations.CreateModel(
            name='Agendamento',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', djtools.db.models.CharFieldPlus(max_length=255, unique=True)),
                (
                    'minuto',
                    djtools.db.models.CharFieldPlus(
                        choices=[
                            ('0', '0'),
                            ('1', '1'),
                            ('2', '2'),
                            ('3', '3'),
                            ('4', '4'),
                            ('5', '5'),
                            ('6', '6'),
                            ('7', '7'),
                            ('8', '8'),
                            ('9', '9'),
                            ('10', '10'),
                            ('11', '11'),
                            ('12', '12'),
                            ('13', '13'),
                            ('14', '14'),
                            ('15', '15'),
                            ('16', '16'),
                            ('17', '17'),
                            ('18', '18'),
                            ('19', '19'),
                            ('20', '20'),
                            ('21', '21'),
                            ('22', '22'),
                            ('23', '23'),
                            ('24', '24'),
                            ('25', '25'),
                            ('26', '26'),
                            ('27', '27'),
                            ('28', '28'),
                            ('29', '29'),
                            ('30', '30'),
                            ('31', '31'),
                            ('32', '32'),
                            ('33', '33'),
                            ('34', '34'),
                            ('35', '35'),
                            ('36', '36'),
                            ('37', '37'),
                            ('38', '38'),
                            ('39', '39'),
                            ('40', '40'),
                            ('41', '41'),
                            ('42', '42'),
                            ('43', '43'),
                            ('44', '44'),
                            ('45', '45'),
                            ('46', '46'),
                            ('47', '47'),
                            ('48', '48'),
                            ('49', '49'),
                            ('50', '50'),
                            ('51', '51'),
                            ('52', '52'),
                            ('53', '53'),
                            ('54', '54'),
                            ('55', '55'),
                            ('56', '56'),
                            ('57', '57'),
                            ('58', '58'),
                            ('59', '59'),
                        ],
                        default='0',
                        max_length=4,
                    ),
                ),
                (
                    'hora',
                    djtools.db.models.CharFieldPlus(
                        choices=[
                            ('*', 'Todas'),
                            ('0', '0'),
                            ('1', '1'),
                            ('2', '2'),
                            ('3', '3'),
                            ('4', '4'),
                            ('5', '5'),
                            ('6', '6'),
                            ('7', '7'),
                            ('8', '8'),
                            ('9', '9'),
                            ('10', '10'),
                            ('11', '11'),
                            ('12', '12'),
                            ('13', '13'),
                            ('14', '14'),
                            ('15', '15'),
                            ('16', '16'),
                            ('17', '17'),
                            ('18', '18'),
                            ('19', '19'),
                            ('20', '20'),
                            ('21', '21'),
                            ('22', '22'),
                            ('23', '23'),
                        ],
                        default='0',
                        max_length=4,
                    ),
                ),
                (
                    'dia_do_mes',
                    djtools.db.models.CharFieldPlus(
                        choices=[
                            ('*', 'Todos'),
                            ('1', '1'),
                            ('2', '2'),
                            ('3', '3'),
                            ('4', '4'),
                            ('5', '5'),
                            ('6', '6'),
                            ('7', '7'),
                            ('8', '8'),
                            ('9', '9'),
                            ('10', '10'),
                            ('11', '11'),
                            ('12', '12'),
                            ('13', '13'),
                            ('14', '14'),
                            ('15', '15'),
                            ('16', '16'),
                            ('17', '17'),
                            ('18', '18'),
                            ('19', '19'),
                            ('20', '20'),
                            ('21', '21'),
                            ('22', '22'),
                            ('23', '23'),
                            ('24', '24'),
                            ('25', '25'),
                            ('26', '26'),
                            ('27', '27'),
                            ('28', '28'),
                            ('29', '29'),
                            ('30', '30'),
                            ('31', '31'),
                        ],
                        default='*',
                        max_length=4,
                        verbose_name='Dia do mês',
                    ),
                ),
                (
                    'mes',
                    djtools.db.models.CharFieldPlus(
                        choices=[
                            ('*', 'Todos'),
                            ('1', '1'),
                            ('2', '2'),
                            ('3', '3'),
                            ('4', '4'),
                            ('5', '5'),
                            ('6', '6'),
                            ('7', '7'),
                            ('8', '8'),
                            ('9', '9'),
                            ('10', '10'),
                            ('11', '11'),
                            ('12', '12'),
                        ],
                        default='*',
                        max_length=4,
                        verbose_name='Mês',
                    ),
                ),
                (
                    'dia_da_semana',
                    djtools.db.models.CharFieldPlus(
                        choices=[
                            ('*', 'Todos'),
                            ('1', 'Segunda-feira'),
                            ('2', 'Terça-feira'),
                            ('3', 'Quarta-feira'),
                            ('4', 'Quinta-feira'),
                            ('5', 'Sexta-feira'),
                            ('6', 'Sábado'),
                            ('7', 'Domingo'),
                        ],
                        default='*',
                        max_length=4,
                        verbose_name='Dia da semana',
                    ),
                ),
                ('descricao', models.TextField(blank=True, null=True, verbose_name='Descrição')),
                ('ativo', models.BooleanField(default=True)),
            ],
            options={'verbose_name': 'Agendamento', 'verbose_name_plural': 'Agendamentos'},
        ),
        migrations.CreateModel(
            name='Comando',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', djtools.db.models.CharFieldPlus(max_length=80, unique=True)),
            ],
            options={'verbose_name': 'Comando de sistema', 'verbose_name_plural': 'Comandos de sistema', 'ordering': ('nome',)},
        ),
        migrations.CreateModel(
            name='ComandoAgendamento',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('parametros', djtools.db.models.CharFieldPlus(blank=True, max_length=255, null=True)),
                ('ativo', models.BooleanField(default=True)),
                ('comando', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='cron.Comando')),
            ],
            options={'verbose_name': 'Comando para agendamento', 'verbose_name_plural': 'Comandos para agendamento', 'ordering': ('comando__nome',)},
        ),
        migrations.CreateModel(
            name='LogExecucao',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('inicio', djtools.db.models.DateTimeFieldPlus(auto_now_add=True, verbose_name='Início')),
                ('fim', djtools.db.models.DateTimeFieldPlus(null=True, verbose_name='Fim')),
                ('status', models.BooleanField(default=False)),
                ('traceback', models.TextField(verbose_name='Traceback')),
                ('log', models.TextField(blank=True, null=True, verbose_name='Log')),
                ('comando', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='cron.ComandoAgendamento', verbose_name='Comando')),
                (
                    'usuario',
                    djtools.db.models.ForeignKeyPlus(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='Usuário'),
                ),
            ],
            options={'verbose_name': 'Log de execução', 'verbose_name_plural': 'Logs de execução'},
        ),
        migrations.AddField(model_name='agendamento', name='comandos', field=models.ManyToManyField(to='cron.ComandoAgendamento')),
        migrations.CreateModel(
            name='AgendamentoDiario',
            fields=[],
            options={'verbose_name': 'Agendamento diário', 'verbose_name_plural': 'Agendamentos diários', 'proxy': True, 'indexes': []},
            bases=('cron.agendamento',),
        ),
        migrations.CreateModel(
            name='AgendamentoHoraEmHora',
            fields=[],
            options={'verbose_name': 'Agendamento hora em hora', 'verbose_name_plural': 'Agendamentos de hora em hora', 'proxy': True, 'indexes': []},
            bases=('cron.agendamento',),
        ),
        migrations.CreateModel(
            name='AgendamentoMensal',
            fields=[],
            options={'verbose_name': 'Agendamento mensal', 'verbose_name_plural': 'Agendamentos mensais', 'proxy': True, 'indexes': []},
            bases=('cron.agendamento',),
        ),
        migrations.CreateModel(
            name='AgendamentoSemanal',
            fields=[],
            options={'verbose_name': 'Agendamento semanal', 'verbose_name_plural': 'Agendamentos semanais', 'proxy': True, 'indexes': []},
            bases=('cron.agendamento',),
        ),
    ]
