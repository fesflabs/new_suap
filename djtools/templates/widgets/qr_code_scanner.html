
<div id="video-container">
    <video id="qr-video" disablepictureinpicture="" playsinline="" style="transform: scaleX(-1);width:300px"></video>
</div>

<script type="module">
    import QrScanner from "/static/djtools/qr-scanner/qr-scanner.min.js";
    const video = document.getElementById('qr-video');
    const videoContainer = document.getElementById('video-container');
    function setResult(result) {
        $('#id_{{ name }}').val(result.data);
    }
    const scanner = new QrScanner(video, result => setResult(result), {
        onDecodeError: error => {},
        highlightScanRegion: true,
        highlightCodeOutline: true,
    });
    scanner.start().then(() => {});
</script>
{{ widget }}
