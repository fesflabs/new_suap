# -*- coding: utf-8 -*-
# Generated by Django 1.11.23 on 2019-08-14 14:54


import almoxarifado.estoque
import almoxarifado.models
from django.db import migrations, models
import django.db.models.deletion
import djtools.db.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [('comum', '0002_auto_20190814_1443'), ('rh', '0001_initial')]

    operations = [
        migrations.CreateModel(
            name='CategoriaMaterialConsumo',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=10, unique=True, verbose_name='Código')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('omitir', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'Elemento de Despesa de Mat. de Consumo',
                'verbose_name_plural': 'Elementos de Despesa de Mat. de Consumo',
                'db_table': 'categoriamaterialconsumo',
                'ordering': ['codigo'],
            },
            bases=(models.Model, almoxarifado.estoque.Estocavel),
        ),
        migrations.CreateModel(
            name='ConfiguracaoEstoque',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tempo_aquisicao', models.PositiveIntegerField(verbose_name='Tempo de Aquisição')),
                ('intervalo_aquisicao', models.PositiveIntegerField(verbose_name='Intervalo de Aquisição')),
            ],
            options={'abstract': False},
        ),
        migrations.CreateModel(
            name='DevolucaoMaterial',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantidade', models.IntegerField(verbose_name='Qtd a ser devolvida')),
                ('processo', djtools.db.models.CharFieldPlus(blank=True, max_length=255, null=True, verbose_name='Número do Processo')),
            ],
            options={'abstract': False},
        ),
        migrations.CreateModel(
            name='Empenho',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero', models.CharField(help_text='O número deve ser único por UG Emitente', max_length=14, verbose_name='Número')),
                ('numero_pregao', models.CharField(blank=True, db_column='numeropregao', max_length=50, null=True, verbose_name='Nº da Licitação')),
                (
                    'data_recebimento_empenho',
                    models.DateField(
                        blank=True,
                        db_column='datarecebimentoempenho',
                        help_text='Data que o fornecedor recebeu o empenho para efeito de cálculo do status da entrega.',
                        null=True,
                        verbose_name='Data Recebimento Empenho',
                    ),
                ),
                (
                    'prazo',
                    models.IntegerField(
                        blank=True,
                        help_text='Prazo em dias, contados a partir da data de recebimento, que o fornecedor tem para concluir a entrega dos itens empenhados',
                        null=True,
                        verbose_name='Prazo',
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[['nao_iniciado', 'Não iniciado'], ['iniciado', 'Iniciado'], ['concluido', 'Concluído']], default='nao_iniciado', max_length=50, null=True
                    ),
                ),
                ('data_prazo', models.DateField(null=True)),
                ('data_conclusao', models.DateField(null=True)),
                ('observacao', models.TextField(blank=True, null=True, verbose_name='Observação')),
            ],
            options={
                'db_table': 'empenho',
                'permissions': (('pode_ver_empenho_consumo', 'Pode ver empenho consumo'), ('pode_ver_empenho_permanente', 'Pode ver empenho permanente')),
            },
        ),
        migrations.CreateModel(
            name='EmpenhoConsumo',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('qtd_empenhada', models.IntegerField(db_column='qtdempenhada')),
                ('qtd_adquirida', models.IntegerField(db_column='qtdadquirida', default=0)),
                ('valor', models.DecimalField(decimal_places=3, max_digits=12)),
            ],
            options={'db_table': 'empenhoconsumo', 'ordering': ['empenho', 'id']},
        ),
        migrations.CreateModel(
            name='Entrada',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data', models.DateTimeField()),
                ('numero_nota_fiscal', models.CharField(blank=True, db_column='numeronotafiscal', max_length=25, null=True, verbose_name='Nº Nota Fiscal')),
                ('data_nota_fiscal', models.DateField(blank=True, db_column='datanotafiscal', null=True)),
            ],
            options={
                'db_table': 'entrada',
                'permissions': (
                    ('pode_ver_entrada', 'Pode buscar e visualizar entradas'),
                    ('pode_ver_entrada_consumo', 'Pode ver entrada consumo'),
                    ('pode_ver_entrada_permanente', 'Pode ver entrada permanente'),
                ),
            },
        ),
        migrations.CreateModel(
            name='EntradaTipo',
            fields=[('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('nome', models.CharField(max_length=25))],
            options={'db_table': 'entradatipo'},
        ),
        migrations.CreateModel(
            name='LicitacaoTipo',
            fields=[('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('nome', models.CharField(max_length=25))],
            options={'verbose_name': 'Tipo de Licitação', 'verbose_name_plural': 'Tipos de Licitação', 'db_table': 'licitacaotipo'},
        ),
        migrations.CreateModel(
            name='MaterialConsumo',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.TextField(help_text='Máximo de 1024 caracteres.', max_length=1024, unique=True, verbose_name='Nome')),
                ('observacao', models.CharField(blank=True, max_length=500, null=True, verbose_name='Observação')),
                ('codigo', models.CharField(blank=True, max_length=6, verbose_name='Código')),
                ('search', djtools.db.models.SearchField(blank=True, default='', editable=False)),
                ('categoria', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.CategoriaMaterialConsumo', verbose_name='Categoria')),
            ],
            options={
                'verbose_name': 'Material de Consumo',
                'verbose_name_plural': 'Materiais de Consumo',
                'db_table': 'materialconsumo',
                'permissions': (
                    ('pode_ver_relatorios_todos', 'Pode ver todos os relatórios de qualquer campus'),
                    ('pode_ver_relatorios_do_campus', 'Pode ver relatórios de seu campus'),
                ),
            },
            bases=(models.Model, almoxarifado.estoque.Estocavel),
        ),
        migrations.CreateModel(
            name='MaterialEstoque',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('valor_medio', models.DecimalField(decimal_places=4, max_digits=12)),
                ('quantidade', models.IntegerField(verbose_name='Estoque')),
                ('material', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MaterialConsumo')),
                ('uo', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='rh.UnidadeOrganizacional')),
            ],
            options={'abstract': False},
        ),
        migrations.CreateModel(
            name='MaterialTipo',
            fields=[('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('nome', models.CharField(max_length=25))],
            options={'db_table': 'materialtipo'},
        ),
        migrations.CreateModel(
            name='MovimentoAlmoxEntrada',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data', models.DateTimeField(auto_now_add=True)),
                ('qtd', models.IntegerField()),
                ('estoque', models.IntegerField()),
                ('valor', models.DecimalField(decimal_places=4, max_digits=12)),
                (
                    'empenho_consumo',
                    djtools.db.models.ForeignKeyPlus(db_column='empenhoconsumo_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.EmpenhoConsumo'),
                ),
                ('entrada', djtools.db.models.ForeignKeyPlus(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.Entrada')),
                ('material', djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MaterialConsumo')),
            ],
            options={'db_table': 'movimentoalmoxentrada'},
        ),
        migrations.CreateModel(
            name='MovimentoAlmoxEntradaTipo',
            fields=[('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('nome', models.CharField(max_length=25))],
            options={'db_table': 'movimentoalmoxentradatipo'},
        ),
        migrations.CreateModel(
            name='MovimentoAlmoxSaida',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data', models.DateTimeField(auto_now_add=True)),
                ('qtd', models.IntegerField()),
                ('valor', models.DecimalField(decimal_places=4, max_digits=12)),
                ('material', djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MaterialConsumo')),
                (
                    'movimento_entrada',
                    djtools.db.models.ForeignKeyPlus(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MovimentoAlmoxEntrada'),
                ),
            ],
            options={'db_table': 'movimentoalmoxsaida'},
        ),
        migrations.CreateModel(
            name='MovimentoAlmoxSaidaTipo',
            fields=[('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('nome', models.CharField(max_length=25))],
            options={'db_table': 'movimentoalmoxsaidatipo'},
        ),
        migrations.CreateModel(
            name='PlanoContasAlmox',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=15, unique=True, verbose_name='Código')),
                ('descricao', models.CharField(max_length=100, unique=True, verbose_name='Descrição')),
                ('ativo', models.BooleanField(default=True, verbose_name='Ativo')),
                ('data_desativacao', djtools.db.models.DateTimeFieldPlus(blank=True, null=True, verbose_name='Data de Desativação')),
            ],
            options={'verbose_name': 'Plano de Contas', 'verbose_name_plural': 'Planos de Contas'},
        ),
        migrations.CreateModel(
            name='RequisicaoAlmoxUO',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data', models.DateTimeField(auto_now_add=True)),
                ('avaliada', models.BooleanField(default=False)),
                ('data_avaliacao_fornecedor', models.DateTimeField(null=True, verbose_name='Avaliada em')),
                (
                    'uo_fornecedora',
                    djtools.db.models.ForeignKeyPlus(
                        db_column='uofornecedora_id', on_delete=django.db.models.deletion.CASCADE, related_name='requisicaoalmoxuofornecedora_set', to='rh.UnidadeOrganizacional'
                    ),
                ),
                (
                    'uo_solicitante',
                    djtools.db.models.ForeignKeyPlus(
                        db_column='uosolicitante_id', on_delete=django.db.models.deletion.CASCADE, related_name='requisicaoalmoxuosolicitante_set', to='rh.UnidadeOrganizacional'
                    ),
                ),
                ('vinculo_solicitante', djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, to='comum.Vinculo')),
            ],
            options={
                'db_table': 'requisicaoalmoxuo',
                'ordering': ['-data'],
                'permissions': (
                    ('pode_ver_todas_requisicoes_uo', 'Pode ver todas as requisições de campi'),
                    ('pode_ver_requisicoes_uo_do_campus', 'Pode ver requisições de seu campus'),
                ),
            },
            bases=(almoxarifado.models.RequisicaoAlmox, models.Model),
        ),
        migrations.CreateModel(
            name='RequisicaoAlmoxUOMaterial',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('qtd', models.IntegerField()),
                ('material', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MaterialConsumo')),
                ('requisicao', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, related_name='item_set', to='almoxarifado.RequisicaoAlmoxUO')),
            ],
            options={'db_table': 'requisicaoalmoxuomaterial'},
            bases=(almoxarifado.models.RequisicaoAlmoxMaterial, models.Model),
        ),
        migrations.CreateModel(
            name='RequisicaoAlmoxUser',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data', models.DateTimeField(auto_now_add=True)),
                ('avaliada', models.BooleanField(default=False)),
                ('observacoes', djtools.db.models.CharFieldPlus(blank=True, max_length=255, null=True, verbose_name='Observações')),
                ('data_avaliacao_fornecedor', models.DateTimeField(null=True, verbose_name='Avaliada em')),
                ('setor_solicitante', djtools.db.models.ForeignKeyPlus(db_column='setorsolicitante_id', on_delete=django.db.models.deletion.CASCADE, to='rh.Setor')),
                ('uo_fornecedora', djtools.db.models.ForeignKeyPlus(db_column='uofornecedora_id', on_delete=django.db.models.deletion.CASCADE, to='rh.UnidadeOrganizacional')),
                (
                    'vinculo_fornecedor',
                    djtools.db.models.ForeignKeyPlus(
                        null=True, on_delete=django.db.models.deletion.CASCADE, related_name='requisicaoalmoxuser_vinculo_fornecedor', to='comum.Vinculo'
                    ),
                ),
                (
                    'vinculo_solicitante',
                    djtools.db.models.ForeignKeyPlus(
                        null=True, on_delete=django.db.models.deletion.CASCADE, related_name='requisicaoalmoxuser_vinculo_solicitante', to='comum.Vinculo'
                    ),
                ),
            ],
            options={
                'db_table': 'requisicaoalmoxuser',
                'ordering': ['-data'],
                'permissions': (
                    ('pode_ver_todas_requisicoes_usuario', 'Pode ver todas as requisições de pessoas'),
                    ('pode_ver_requisicoes_usuario_do_campus', 'Pode ver requisições de pessoas de seu campus'),
                ),
            },
            bases=(almoxarifado.models.RequisicaoAlmox, models.Model),
        ),
        migrations.CreateModel(
            name='RequisicaoAlmoxUserMaterial',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('qtd', models.IntegerField()),
                ('material', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MaterialConsumo')),
                ('requisicao', djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, related_name='item_set', to='almoxarifado.RequisicaoAlmoxUser')),
            ],
            options={'db_table': 'requisicaoalmoxusermaterial'},
            bases=(almoxarifado.models.RequisicaoAlmoxMaterial, models.Model),
        ),
        migrations.CreateModel(
            name='UnidadeMedida',
            fields=[('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('nome', models.CharField(max_length=50, unique=True))],
            options={'verbose_name': 'Unidade de Medida', 'verbose_name_plural': 'Unidades de Medida', 'db_table': 'unidademedida'},
        ),
        migrations.AddField(
            model_name='movimentoalmoxsaida',
            name='requisicao_uo_material',
            field=djtools.db.models.ForeignKeyPlus(
                db_column='requisicaouomaterial_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.RequisicaoAlmoxUOMaterial'
            ),
        ),
        migrations.AddField(
            model_name='movimentoalmoxsaida',
            name='requisicao_user_material',
            field=djtools.db.models.ForeignKeyPlus(
                db_column='requisicaousermaterial_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.RequisicaoAlmoxUserMaterial'
            ),
        ),
        migrations.AddField(
            model_name='movimentoalmoxsaida',
            name='tipo',
            field=djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MovimentoAlmoxSaidaTipo'),
        ),
        migrations.AddField(
            model_name='movimentoalmoxsaida',
            name='uo',
            field=djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, to='rh.UnidadeOrganizacional'),
        ),
        migrations.AddField(
            model_name='movimentoalmoxentrada',
            name='movimento_saida',
            field=djtools.db.models.ForeignKeyPlus(
                blank=True,
                help_text='Preenchido caso tipo seja "requisicao_uo_material" e representa a saída que originou esta entrada.',
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to='almoxarifado.MovimentoAlmoxSaida',
            ),
        ),
        migrations.AddField(
            model_name='movimentoalmoxentrada',
            name='requisicao_uo_material',
            field=djtools.db.models.ForeignKeyPlus(
                db_column='requisicaouomaterial_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.RequisicaoAlmoxUOMaterial'
            ),
        ),
        migrations.AddField(
            model_name='movimentoalmoxentrada',
            name='tipo',
            field=djtools.db.models.ForeignKeyPlus(on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.MovimentoAlmoxEntradaTipo'),
        ),
        migrations.AddField(
            model_name='movimentoalmoxentrada',
            name='uo',
            field=djtools.db.models.ForeignKeyPlus(null=True, on_delete=django.db.models.deletion.CASCADE, to='rh.UnidadeOrganizacional'),
        ),
        migrations.AddField(
            model_name='materialconsumo',
            name='unidade',
            field=djtools.db.models.ForeignKeyPlus(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='almoxarifado.UnidadeMedida', verbose_name='Unidade'),
        ),
    ]
