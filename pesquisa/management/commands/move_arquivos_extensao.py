# -*- coding: utf-8 -*-
"""
Importar os anexos de projetos e editais que foram armazenados no app projetos antes da separação
"""
from djtools.management.commands import BaseCommandPlus
from django.conf import settings
import os
import glob
import shutil


def make_dir(path):
    if not os.path.isdir(path):
        os.makedirs(path)


def copy_dir(source_item, destination_item, ids_arquivo=None, ids_de_pasta=None, eh_anexo_edital=False):

    if os.path.isdir(source_item):
        make_dir(destination_item)
        nomes_de_arquivo_origem = []
        if ids_de_pasta is None:
            for id_arqivo in list(ids_arquivo.keys()):
                # Uso o glob.glob porque no diretório pode ter extensão .pdf ou .doc.
                make_dir(os.path.join(destination_item, '%d/' % ids_arquivo[id_arqivo]))
                nomes_de_arquivo_origem.extend(glob.glob(os.path.join(source_item, '%d.*' % id_arqivo)))
        else:
            for id_pasta in ids_de_pasta:
                make_dir(os.path.join(destination_item, '%d/anexo' % ids_de_pasta[id_pasta]))
                if eh_anexo_edital:
                    nomes_de_arquivo_origem.extend(glob.glob(os.path.join(source_item, '%d/*' % id_pasta)))
                else:
                    nomes_de_arquivo_origem.extend(glob.glob(os.path.join(source_item, '%d/anexo/*' % id_pasta)))
        for path_arquivo_origem in nomes_de_arquivo_origem:
            try:
                nome_arquivo_origem = path_arquivo_origem.split('/')[-1]
                id_arquivo_origem = os.path.splitext(nome_arquivo_origem)[0]  # remove a extensão do arquivo
                if ids_arquivo.get(int(id_arquivo_origem)):
                    nome_arquivo_destino = '%s%s' % (ids_arquivo[int(id_arquivo_origem)], os.path.splitext(nome_arquivo_origem)[1])
                else:
                    print('\t\tValor correspondente ao ID do arquivo de origem não encontrado.\n')
                    nome_arquivo_destino = nome_arquivo_origem
                nome_diretorio_origem = path_arquivo_origem.split('/')[-2]
                if eh_anexo_edital:
                    # copiar anexos dos editais
                    nome_diretorio_destino = str(ids_de_pasta[int(nome_diretorio_origem)])
                    path_arquivo_destino = os.path.join(destination_item, nome_diretorio_destino, 'anexo', nome_arquivo_destino)
                elif ids_de_pasta is None:
                    # copiar editais
                    nome_diretorio_destino = str(ids_arquivo[int(id_arquivo_origem)])
                    path_arquivo_destino = os.path.join(destination_item, nome_diretorio_destino, nome_arquivo_destino)
                else:
                    # copiar anexos dos projetos
                    nome_diretorio_origem = path_arquivo_origem.split('/')[-3]
                    nome_diretorio_destino = str(ids_de_pasta[int(nome_diretorio_origem)])
                    path_arquivo_destino = os.path.join(destination_item, nome_diretorio_destino, 'anexo', nome_arquivo_destino)
                print(('%s\n%s\n' % (path_arquivo_origem, path_arquivo_destino)))
                copy_dir(path_arquivo_origem, path_arquivo_destino)
            except Exception:
                import sys
                import traceback

                exc_type, exc_value, exc_traceback = sys.exc_info()
                print((repr(traceback.format_tb(exc_traceback))))
    else:
        shutil.copy(source_item, destination_item)


class Command(BaseCommandPlus):
    def handle(self, *args, **options):

        # from pesquisa.models import Projeto, Edital, ProjetoAnexo, EditalAnexoAuxiliar
        #
        # dic = {}
        # for edital in Edital.objects.all():
        #     dic[edital.id_legado] = edital.id
        # print 'Edital: ', dic
        #
        # dic = {}
        # for eanexo in EditalAnexoAuxiliar.objects.filter(id_legado__isnull=False):
        #     dic[eanexo.id_legado] = eanexo.id
        # print 'Edital Anexo: ', dic
        #
        # dic = {}
        # for projeto in Projeto.objects.all():
        #     dic[projeto.id_legado] = projeto.id
        # print 'Projeto: ', dic
        #
        # dic = {}
        # for panexo in ProjetoAnexo.objects.filter(id_legado__isnull=False):
        #     dic[panexo.id_legado] = panexo.id
        # print 'Projeto Anexo: ', dic

        dic_edital_anexo = {
            50: 9,
            51: 10,
            52: 1,
            53: 4,
            54: 2,
            57: 6,
            58: 7,
            59: 8,
            60: 3,
            61: 5,
            63: 20,
            64: 21,
            65: 22,
            66: 11,
            67: 13,
            68: 12,
            69: 14,
            70: 15,
            71: 16,
            72: 17,
            73: 18,
            74: 19,
            92: 27,
            94: 28,
            95: 29,
            96: 24,
            97: 25,
            98: 26,
            100: 31,
            101: 32,
            102: 33,
        }

        dic_projeto_anexo = {
            10242: 2143,
            10923: 136,
            10246: 1125,
            10248: 565,
            10249: 566,
            10250: 567,
            10252: 6,
            10254: 1123,
            10255: 2147,
            10256: 2150,
            8536: 1843,
            8688: 1393,
            10260: 2145,
            10262: 4,
            10264: 422,
            10267: 335,
            10268: 338,
            10586: 223,
            10270: 337,
            10272: 2106,
            10274: 2104,
            10276: 2102,
            8920: 2030,
            10435: 437,
            10279: 209,
            10280: 46,
            8540: 1358,
            10283: 44,
            10284: 42,
            10287: 40,
            8527: 610,
            10290: 990,
            10775: 2217,
            8542: 1356,
            10295: 67,
            10297: 66,
            8250: 397,
            10299: 207,
            10301: 987,
            9197: 669,
            8544: 1354,
            10310: 74,
            10312: 72,
            10314: 70,
            11050: 366,
            10316: 506,
            10318: 575,
            10641: 466,
            10322: 2178,
            11053: 542,
            10327: 2174,
            10329: 322,
            10331: 555,
            8284: 746,
            10333: 175,
            8287: 979,
            10338: 323,
            10340: 320,
            10341: 103,
            10342: 104,
            10344: 388,
            10345: 387,
            10346: 386,
            10347: 384,
            8301: 1618,
            10350: 382,
            10352: 380,
            10354: 373,
            8308: 1315,
            8309: 1615,
            10358: 2141,
            10359: 2142,
            10362: 434,
            10364: 2185,
            10602: 2180,
            10366: 350,
            10367: 349,
            10369: 351,
            10370: 348,
            10372: 2152,
            8327: 394,
            8328: 395,
            8329: 1054,
            8330: 1055,
            11287: 375,
            8332: 799,
            10382: 214,
            8335: 833,
            10385: 479,
            10575: 521,
            10916: 2271,
            8340: 1155,
            10606: 295,
            8342: 993,
            8734: 1996,
            8348: 832,
            10397: 206,
            8350: 392,
            10399: 204,
            8352: 390,
            10401: 148,
            8355: 941,
            10405: 527,
            8359: 1614,
            8361: 702,
            8362: 703,
            8363: 797,
            10413: 502,
            10414: 501,
            10269: 336,
            10416: 232,
            10952: 492,
            10418: 2154,
            10420: 2155,
            8373: 1118,
            8609: 1546,
            10612: 192,
            8378: 1629,
            8379: 1628,
            10428: 347,
            8906: 1291,
            8382: 1624,
            10431: 237,
            10432: 236,
            10433: 438,
            10434: 436,
            8907: 2027,
            10436: 435,
            8393: 807,
            10443: 114,
            10445: 343,
            8909: 2025,
            8400: 805,
            8641: 1596,
            8402: 803,
            10451: 339,
            10452: 2284,
            10453: 2287,
            10454: 2285,
            8407: 1944,
            9261: 939,
            8409: 1153,
            8411: 1851,
            10460: 560,
            8413: 1849,
            10463: 2191,
            8416: 1402,
            8417: 1945,
            10466: 559,
            10468: 2189,
            8421: 1041,
            10471: 143,
            10473: 142,
            10474: 371,
            9021: 1575,
            10477: 370,
            10478: 32,
            10479: 33,
            8432: 714,
            8433: 713,
            10483: 64,
            8436: 708,
            10485: 118,
            8438: 707,
            8439: 709,
            8440: 1481,
            10489: 2197,
            8635: 1226,
            8443: 1753,
            10493: 112,
            10494: 2194,
            10495: 2196,
            10496: 130,
            10497: 131,
            10499: 132,
            10501: 128,
            10503: 183,
            8456: 1954,
            8457: 1883,
            10507: 411,
            10508: 409,
            8461: 1847,
            10510: 358,
            10511: 406,
            10513: 356,
            10514: 354,
            8467: 1845,
            10516: 499,
            10517: 500,
            8921: 1768,
            8472: 736,
            8473: 737,
            8475: 1039,
            8477: 1520,
            8479: 1324,
            10529: 2200,
            10648: 26,
            10531: 302,
            8484: 613,
            8485: 608,
            10534: 78,
            10535: 79,
            8489: 1877,
            10539: 60,
            10541: 58,
            10543: 484,
            8497: 1347,
            10546: 120,
            8500: 890,
            10549: 80,
            8503: 763,
            8504: 761,
            10553: 36,
            8506: 2093,
            8507: 2094,
            10556: 481,
            10557: 416,
            8510: 1322,
            10562: 579,
            8587: 1890,
            10564: 577,
            10566: 86,
            8519: 1985,
            10568: 523,
            8522: 1303,
            10572: 158,
            10573: 157,
            8526: 612,
            10637: 470,
            8528: 1299,
            10578: 160,
            10579: 520,
            8532: 1534,
            10582: 159,
            10584: 82,
            10585: 221,
            8538: 1309,
            10588: 464,
            10589: 220,
            10590: 222,
            10592: 2193,
            10593: 498,
            8546: 1352,
            10595: 496,
            8548: 1297,
            10597: 494,
            8550: 1295,
            10599: 2183,
            8552: 1351,
            8553: 2131,
            8554: 2251,
            10604: 297,
            10605: 296,
            8558: 1462,
            8559: 1463,
            10608: 196,
            8561: 1889,
            10610: 194,
            8564: 2008,
            10614: 518,
            8567: 1766,
            10616: 189,
            10617: 188,
            10619: 186,
            10620: 185,
            10621: 187,
            10623: 251,
            8576: 830,
            10625: 313,
            10627: 311,
            10629: 2210,
            8582: 1082,
            10631: 303,
            10823: 2244,
            10633: 472,
            8586: 1961,
            10635: 2214,
            8589: 717,
            10638: 468,
            8591: 1343,
            8592: 1344,
            8593: 2013,
            10643: 309,
            10645: 307,
            10647: 29,
            8600: 1746,
            10649: 28,
            8602: 1875,
            8603: 2130,
            10653: 405,
            10654: 2212,
            10655: 2213,
            10656: 156,
            10925: 134,
            10658: 154,
            8611: 849,
            8612: 848,
            10661: 151,
            8614: 1027,
            10664: 364,
            8617: 1029,
            10666: 403,
            8619: 1744,
            8620: 1745,
            8621: 1386,
            8622: 1389,
            8624: 635,
            8625: 634,
            10675: 27,
            8628: 1834,
            8606: 852,
            9289: 1514,
            10679: 443,
            8633: 1227,
            8607: 851,
            10685: 2209,
            10686: 2207,
            10687: 2208,
            8640: 1387,
            8608: 850,
            10691: 249,
            8644: 1697,
            10693: 421,
            8647: 1594,
            9767: 2083,
            10449: 346,
            8651: 1591,
            10700: 94,
            10748: 240,
            10702: 2171,
            8655: 1447,
            8656: 2005,
            8657: 2003,
            10706: 2206,
            8659: 679,
            10708: 90,
            10709: 24,
            8662: 1932,
            10712: 88,
            8665: 694,
            10714: 2170,
            10716: 76,
            10717: 77,
            8670: 1052,
            10719: 2220,
            8672: 1835,
            10722: 2216,
            10723: 2219,
            8676: 1663,
            8677: 846,
            10727: 596,
            8681: 813,
            8682: 743,
            10731: 553,
            10733: 2137,
            10735: 101,
            10736: 100,
            8616: 1031,
            8690: 1980,
            8692: 1392,
            8694: 2007,
            10743: 14,
            10744: 399,
            10745: 400,
            8698: 1742,
            8699: 1743,
            8700: 2064,
            10749: 2242,
            8702: 1976,
            10325: 2176,
            10753: 452,
            10667: 402,
            8709: 696,
            10759: 2240,
            10760: 2239,
            8713: 695,
            10762: 2237,
            8715: 1583,
            8716: 1582,
            10765: 361,
            10766: 363,
            8719: 812,
            8720: 814,
            8721: 827,
            10770: 2135,
            8723: 975,
            10772: 362,
            8725: 2000,
            10774: 2133,
            8727: 2011,
            8728: 1286,
            10778: 2233,
            10779: 441,
            10781: 540,
            10782: 539,
            10783: 538,
            8736: 1748,
            10672: 2139,
            8738: 1620,
            10787: 305,
            8740: 971,
            10789: 2248,
            8742: 2009,
            8743: 2010,
            10793: 171,
            8746: 1994,
            8748: 675,
            10798: 2235,
            8751: 1556,
            8752: 1992,
            10801: 202,
            8754: 1554,
            10803: 200,
            8756: 1093,
            10805: 198,
            8759: 1669,
            8760: 1667,
            10809: 446,
            8762: 1962,
            10811: 378,
            8764: 534,
            10813: 244,
            8766: 965,
            10815: 243,
            8768: 1998,
            10817: 218,
            8770: 964,
            8771: 963,
            10820: 445,
            10821: 432,
            8774: 782,
            10383: 2288,
            10824: 2247,
            8777: 780,
            10826: 2245,
            8631: 1116,
            10828: 56,
            8290: 977,
            8783: 776,
            10860: 318,
            10834: 139,
            10836: 50,
            8789: 1091,
            8791: 2065,
            8793: 1037,
            8797: 1035,
            10847: 368,
            10848: 516,
            10849: 517,
            10850: 457,
            10851: 456,
            10853: 2231,
            8806: 1798,
            10855: 2227,
            10856: 2228,
            8613: 1028,
            8810: 1974,
            8811: 1439,
            8812: 1437,
            10861: 2256,
            10862: 2257,
            8637: 1385,
            10864: 2255,
            8817: 1435,
            10866: 286,
            8819: 1251,
            10869: 282,
            8822: 1249,
            8823: 1634,
            10872: 455,
            10873: 138,
            8826: 1489,
            9663: 2118,
            10877: 293,
            10878: 2261,
            10879: 2262,
            10880: 2260,
            8833: 1738,
            10819: 248,
            8837: 1959,
            10689: 462,
            8840: 1552,
            8841: 712,
            8842: 960,
            8983: 1349,
            8844: 1841,
            10893: 18,
            8846: 711,
            8847: 710,
            8848: 887,
            8849: 885,
            10899: 458,
            8852: 1094,
            8853: 1839,
            10903: 261,
            10905: 260,
            10907: 259,
            8860: 1170,
            10909: 276,
            8863: 1380,
            8864: 1381,
            8865: 2073,
            10915: 2272,
            8868: 2071,
            8869: 903,
            10918: 289,
            10919: 288,
            10921: 2269,
            8874: 1699,
            8875: 1704,
            8876: 1320,
            8877: 1321,
            8878: 1145,
            10927: 257,
            8880: 1294,
            8881: 668,
            8882: 1292,
            8884: 1288,
            8886: 1824,
            10697: 96,
            8889: 1826,
            8891: 2069,
            8893: 2067,
            10944: 179,
            8897: 1716,
            10699: 2172,
            9811: 1182,
            8310: 1617,
            8902: 1812,
            8903: 2032,
            8904: 2029,
            8652: 1449,
            10954: 491,
            10955: 490,
            8908: 2028,
            10957: 2278,
            8910: 2026,
            10959: 2276,
            10960: 331,
            8913: 664,
            10963: 514,
            10964: 327,
            8917: 274,
            10966: 326,
            10967: 329,
            10968: 328,
            10969: 513,
            10970: 511,
            10971: 512,
            8925: 1654,
            10390: 477,
            8927: 1656,
            10704: 92,
            8931: 2127,
            8932: 1765,
            8933: 1757,
            8935: 2123,
            8937: 1964,
            8939: 1816,
            8941: 1814,
            8943: 1692,
            8311: 1631,
            8946: 1689,
            8947: 1687,
            8952: 1788,
            8660: 677,
            8954: 648,
            8957: 1796,
            8961: 1876,
            8963: 1430,
            8965: 1700,
            8966: 1701,
            8967: 646,
            8969: 1695,
            8970: 1696,
            8971: 1702,
            8972: 1703,
            8973: 854,
            10335: 173,
            8975: 652,
            11024: 547,
            8977: 860,
            11026: 545,
            8980: 1897,
            8981: 1899,
            8982: 1898,
            10713: 2169,
            8985: 1345,
            8987: 1060,
            8989: 1759,
            8992: 2054,
            8994: 2049,
            11043: 543,
            11044: 544,
            8997: 2051,
            9291: 1131,
            9000: 168,
            9648: 725,
            9002: 1096,
            9003: 272,
            9005: 1009,
            9006: 1007,
            9008: 1005,
            9010: 1003,
            8899: 1638,
            11061: 2265,
            9014: 1099,
            9018: 1577,
            8671: 1053,
            8557: 2250,
            10378: 2289,
            9022: 1572,
            9023: 1573,
            9025: 858,
            9027: 628,
            9028: 630,
            9029: 629,
            9030: 626,
            9032: 624,
            10380: 216,
            9034: 640,
            10530: 301,
            9036: 1685,
            8674: 1662,
            9038: 1683,
            8597: 1275,
            9040: 1681,
            9042: 1330,
            9043: 1113,
            11093: 2,
            9046: 868,
            11096: 1305,
            9050: 1078,
            9051: 1076,
            9053: 1074,
            10725: 598,
            9056: 1588,
            9058: 2023,
            9019: 1574,
            9060: 2021,
            9062: 2019,
            9361: 658,
            9064: 2017,
            9067: 2015,
            9068: 1106,
            9069: 1111,
            9071: 1109,
            9073: 1107,
            9363: 657,
            9076: 1466,
            10729: 2258,
            9080: 1587,
            9082: 1224,
            10668: 401,
            9084: 1222,
            9086: 1830,
            9087: 1433,
            9088: 1434,
            8683: 742,
            11141: 1770,
            11142: 1771,
            9096: 794,
            9097: 791,
            11147: 48,
            9101: 757,
            8685: 1982,
            9106: 1206,
            9108: 1204,
            9111: 1202,
            9112: 1831,
            9114: 1895,
            9116: 1828,
            9118: 1778,
            10601: 2181,
            9121: 828,
            8579: 1740,
            8525: 1301,
            9129: 1247,
            9130: 1487,
            9132: 2081,
            10738: 594,
            9134: 1886,
            9135: 1485,
            11185: 228,
            8283: 745,
            9139: 1364,
            10398: 205,
            9142: 1779,
            10670: 2224,
            9145: 1121,
            9150: 1412,
            9151: 1410,
            9153: 1408,
            10481: 31,
            9155: 2077,
            9158: 2076,
            9159: 2075,
            9160: 1465,
            9161: 1464,
            9162: 792,
            8695: 2006,
            10525: 124,
            9165: 1235,
            9166: 1234,
            9167: 1233,
            9169: 1970,
            9171: 810,
            9173: 808,
            8697: 1979,
            9177: 955,
            10746: 242,
            9184: 1648,
            9185: 884,
            9186: 883,
            9187: 845,
            9188: 844,
            9189: 843,
            9190: 840,
            9192: 841,
            9193: 673,
            10407: 2158,
            10740: 98,
            9199: 1280,
            9201: 1279,
            9202: 1277,
            9203: 1278,
            9206: 734,
            10409: 525,
            9208: 732,
            8831: 1808,
            9212: 1871,
            9213: 1872,
            9045: 870,
            9216: 1531,
            8763: 1963,
            9218: 1530,
            10411: 234,
            9220: 1140,
            11094: 1307,
            9222: 1231,
            9223: 1232,
            9224: 1138,
            9226: 1136,
            9228: 1134,
            9230: 1132,
            9232: 1190,
            9048: 931,
            9234: 1729,
            8707: 699,
            9236: 1957,
            11285: 147,
            9238: 1098,
            9239: 1072,
            9241: 996,
            9246: 1864,
            10757: 448,
            8368: 744,
            9250: 1586,
            9251: 1869,
            9252: 1870,
            8696: 1978,
            9254: 1391,
            9255: 1390,
            9257: 866,
            9258: 864,
            8711: 740,
            8370: 802,
            9262: 951,
            9264: 937,
            9266: 935,
            9269: 1406,
            9271: 1404,
            9272: 1649,
            9273: 1650,
            9274: 1646,
            9276: 1644,
            8369: 801,
            9278: 1642,
            9280: 817,
            11104: 1195,
            9282: 1640,
            9284: 1694,
            9285: 1693,
            9286: 1913,
            9287: 1914,
            9288: 1444,
            10764: 419,
            9609: 1023,
            10423: 417,
            9292: 1129,
            9294: 1127,
            8717: 704,
            9296: 1926,
            9298: 1925,
            9299: 1936,
            9301: 1911,
            9302: 1912,
            9303: 1237,
            9305: 1245,
            9309: 1243,
            9311: 1241,
            9313: 1266,
            9314: 1265,
            9315: 1239,
            9317: 1479,
            8380: 1626,
            9322: 1477,
            9323: 1544,
            9325: 2042,
            9326: 2044,
            9327: 1807,
            9328: 789,
            9330: 1263,
            9331: 1264,
            9333: 1261,
            9334: 1260,
            9335: 1259,
            9336: 1542,
            8767: 966,
            9338: 1805,
            9340: 1679,
            9342: 1256,
            9343: 1258,
            9344: 1540,
            9346: 1257,
            9347: 1255,
            9348: 1538,
            9350: 1803,
            9352: 1801,
            9355: 662,
            9356: 660,
            9357: 661,
            9358: 655,
            9359: 659,
            9360: 654,
            10776: 2218,
            9362: 656,
            8387: 1152,
            9364: 1475,
            9366: 1012,
            9367: 1013,
            9368: 2036,
            9369: 2033,
            9370: 2035,
            9371: 2034,
            9372: 690,
            8730: 1955,
            9374: 2041,
            9375: 2043,
            9376: 1253,
            10710: 25,
            9379: 2039,
            9380: 2037,
            9382: 1420,
            9384: 1428,
            9385: 1427,
            9386: 1519,
            9388: 1425,
            9389: 1423,
            9391: 1709,
            9393: 783,
            9394: 1421,
            9395: 1422,
            9396: 786,
            9397: 787,
            9398: 1707,
            10469: 2190,
            9403: 1609,
            9404: 1418,
            9418: 1455,
            9406: 1733,
            9408: 784,
            8292: 945,
            10660: 150,
            9414: 1453,
            9415: 1454,
            8905: 1290,
            10258: 2148,
            9422: 1677,
            9423: 1731,
            8815: 1972,
            11042: 581,
            9427: 1675,
            9429: 1705,
            9793: 874,
            9431: 1622,
            9433: 1451,
            9435: 917,
            9436: 920,
            9437: 1370,
            9438: 1368,
            9440: 1862,
            9442: 912,
            9444: 915,
            9445: 916,
            9447: 1536,
            9448: 918,
            9449: 911,
            10953: 493,
            9451: 691,
            9452: 2097,
            9453: 2098,
            9454: 913,
            9455: 914,
            9458: 1313,
            9460: 1990,
            9462: 1968,
            9464: 1311,
            9466: 1966,
            9468: 680,
            9770: 1103,
            8405: 1943,
            9472: 1909,
            9474: 1906,
            9475: 1908,
            9476: 1903,
            9477: 1907,
            9478: 684,
            9480: 1442,
            9482: 1794,
            10455: 2286,
            9485: 1066,
            9486: 1810,
            9488: 1379,
            9489: 1378,
            9490: 825,
            9492: 1710,
            9494: 1440,
            9498: 1065,
            9499: 1064,
            9500: 1776,
            9502: 1632,
            9504: 1063,
            9505: 1062,
            9506: 929,
            9508: 927,
            9511: 923,
            9512: 924,
            9515: 1930,
            9516: 1893,
            9518: 1929,
            9519: 1928,
            9520: 2089,
            9522: 1375,
            9523: 1506,
            9527: 1333,
            10804: 199,
            8415: 1401,
            9533: 1941,
            9535: 1018,
            9536: 1021,
            9538: 1214,
            9099: 1784,
            9540: 1212,
            9542: 166,
            10465: 562,
            9545: 1210,
            9546: 164,
            9549: 1273,
            9551: 1988,
            9552: 1792,
            9554: 1019,
            9556: 1318,
            9558: 933,
            8638: 1388,
            9560: 838,
            9561: 839,
            9562: 1016,
            9103: 1782,
            9564: 1526,
            9566: 1524,
            9567: 1525,
            9568: 1014,
            9570: 1271,
            9571: 1272,
            9572: 1269,
            9574: 1613,
            9575: 1611,
            9577: 1188,
            9585: 1939,
            9586: 1148,
            9588: 892,
            9590: 1495,
            9593: 1498,
            9594: 891,
            9595: 1496,
            9596: 1497,
            9597: 1799,
            9599: 1949,
            9601: 1414,
            9604: 1950,
            9605: 1986,
            9607: 1208,
            10825: 2246,
            9611: 1473,
            9613: 1376,
            9614: 1377,
            9615: 1901,
            9618: 1471,
            9619: 1331,
            9621: 755,
            8431: 1483,
            8773: 961,
            9639: 2061,
            9640: 1200,
            9642: 1873,
            8775: 1673,
            9644: 644,
            9646: 642,
            10755: 450,
            9650: 723,
            9652: 721,
            9655: 719,
            9657: 2119,
            9659: 1120,
            9660: 1119,
            11301: 146,
            9662: 1001,
            8437: 706,
            9664: 2117,
            9665: 999,
            8779: 1671,
            9668: 1923,
            9669: 1921,
            9671: 1919,
            9673: 1917,
            9675: 1915,
            9677: 2116,
            9678: 1523,
            9679: 1522,
            9680: 2121,
            9682: 1070,
            8915: 2125,
            9689: 1165,
            10961: 332,
            9691: 1166,
            9692: 1164,
            9693: 862,
            9695: 2060,
            9696: 2059,
            9697: 1198,
            9699: 1197,
            9702: 2114,
            9703: 2115,
            9704: 686,
            9529: 1904,
            9707: 687,
            9709: 2045,
            9710: 1080,
            8445: 1752,
            9712: 1493,
            9713: 1494,
            8418: 1946,
            9715: 1763,
            9716: 1762,
            9717: 1761,
            8788: 969,
            9725: 2100,
            9727: 2112,
            9728: 2113,
            9729: 2109,
            9730: 2108,
            9732: 1174,
            9738: 767,
            9741: 765,
            9746: 1335,
            10785: 551,
            9749: 1362,
            9752: 1459,
            9755: 1457,
            9757: 1569,
            9758: 1570,
            8453: 1718,
            9760: 1267,
            9137: 1884,
            9768: 2080,
            8645: 888,
            9771: 909,
            9772: 907,
            9774: 905,
            9776: 1101,
            9779: 1373,
            9781: 1371,
            8944: 1690,
            9789: 1558,
            9790: 1637,
            9791: 1636,
            8800: 1033,
            9794: 873,
            8459: 1880,
            9797: 769,
            9798: 879,
            8801: 967,
            9800: 877,
            9802: 875,
            9143: 749,
            9804: 2099,
            9806: 871,
            9807: 2078,
            10965: 330,
            8803: 1230,
            9812: 1180,
            11193: 226,
            10829: 54,
            9833: 910,
            10403: 253,
            9836: 1860,
            9837: 1858,
            9840: 1855,
            9842: 1853,
            9845: 1162,
            8468: 1846,
            9851: 1068,
            10858: 2226,
            9854: 901,
            9855: 1048,
            9857: 899,
            9859: 898,
            9860: 896,
            9862: 894,
            9865: 1046,
            10519: 181,
            9870: 650,
            9872: 1822,
            9874: 1652,
            8814: 1147,
            9878: 2091,
            10521: 2199,
            9881: 1416,
            10863: 2254,
            9884: 2001,
            9886: 1460,
            8781: 778,
            9888: 1567,
            8649: 1592,
            10523: 126,
            11207: 255,
            9195: 671,
            10867: 284,
            8786: 536,
            10491: 62,
            8718: 705,
            10527: 2202,
            8481: 611,
            10871: 454,
            8482: 609,
            8446: 1750,
            9849: 1160,
            9950: 1579,
            10533: 299,
            10650: 407,
            10875: 2263,
            8487: 1878,
            8829: 1550,
            8843: 959,
            10537: 122,
            9979: 1468,
            8832: 1809,
            8491: 1548,
            9253: 1868,
            9994: 1578,
            9175: 957,
            9998: 1664,
            10005: 682,
            8495: 1025,
            8585: 819,
            10017: 994,
            10018: 995,
            10019: 1934,
            10545: 230,
            10025: 1603,
            10027: 1218,
            10818: 247,
            10029: 1219,
            9181: 1328,
            10035: 823,
            10768: 440,
            10889: 22,
            8995: 2048,
            8501: 1396,
            10048: 759,
            10891: 20,
            10487: 116,
            10058: 1606,
            10551: 38,
            8505: 762,
            10074: 1604,
            10895: 16,
            10081: 1186,
            10897: 460,
            10558: 414,
            10651: 410,
            10106: 729,
            10109: 1360,
            10901: 278,
            10115: 753,
            10116: 751,
            10692: 250,
            8855: 1089,
            10430: 238,
            10771: 360,
            9410: 622,
            8857: 1086,
            10139: 270,
            10142: 1184,
            8518: 1984,
            8861: 1168,
            10163: 573,
            10165: 571,
            10911: 316,
            10172: 1774,
            10570: 84,
            10176: 1772,
            10181: 105,
            10913: 291,
            10186: 557,
            10191: 268,
            10192: 269,
            10447: 341,
            10705: 2205,
            10201: 1491,
            10203: 1383,
            10204: 1382,
            10205: 429,
            10791: 549,
            10576: 522,
            10213: 424,
            10215: 12,
            10216: 10,
            10219: 426,
            10220: 427,
            8251: 396,
            10230: 428,
            10233: 570,
            10234: 569,
            10236: 8,
        }

        dic_projeto = {
            2048: 46,
            2049: 74,
            2050: 606,
            2051: 48,
            2052: 120,
            2053: 607,
            2054: 69,
            2055: 609,
            2056: 612,
            2057: 19,
            2058: 107,
            2060: 610,
            2061: 95,
            2062: 106,
            2063: 614,
            2065: 127,
            2066: 85,
            2068: 93,
            2070: 593,
            2071: 26,
            2073: 611,
            2074: 8,
            2076: 58,
            2077: 613,
            2078: 67,
            2079: 617,
            2080: 147,
            2082: 130,
            2083: 621,
            2084: 15,
            2085: 619,
            2086: 27,
            2087: 91,
            2088: 3,
            2090: 43,
            2091: 59,
            2092: 62,
            2093: 66,
            2095: 88,
            2096: 615,
            2097: 616,
            2098: 618,
            2099: 65,
            2100: 622,
            2101: 37,
            2102: 7,
            2103: 148,
            2104: 103,
            2106: 102,
            2109: 76,
            2110: 13,
            2111: 623,
            2112: 624,
            2114: 78,
            2115: 112,
            2116: 71,
            2119: 627,
            2122: 628,
            2123: 119,
            2125: 630,
            2134: 4,
            2135: 35,
            2136: 52,
            2138: 63,
            2146: 87,
            2149: 96,
            2160: 116,
            2165: 122,
            1318: 221,
            1320: 213,
            1321: 164,
            1322: 184,
            1324: 201,
            1328: 632,
            1329: 212,
            1331: 279,
            1337: 366,
            1340: 231,
            1344: 176,
            1347: 195,
            1348: 240,
            1350: 274,
            1357: 244,
            1359: 309,
            1360: 322,
            1363: 451,
            1364: 373,
            1365: 394,
            1366: 170,
            1367: 454,
            1369: 302,
            1371: 177,
            1372: 505,
            1373: 512,
            1374: 234,
            1378: 371,
            1379: 378,
            1380: 576,
            1383: 239,
            1384: 236,
            1385: 479,
            1386: 235,
            1387: 245,
            1388: 257,
            1389: 282,
            1390: 291,
            1391: 308,
            1392: 331,
            1393: 506,
            1394: 173,
            1395: 284,
            1396: 296,
            1398: 286,
            1399: 237,
            1400: 258,
            1401: 267,
            1403: 347,
            1404: 357,
            1405: 376,
            1406: 424,
            1408: 445,
            1409: 429,
            1410: 158,
            1412: 620,
            1415: 323,
            1416: 370,
            1417: 422,
            1418: 461,
            1419: 468,
            1421: 530,
            1422: 561,
            1423: 575,
            1424: 137,
            1425: 209,
            1426: 216,
            1427: 228,
            1428: 238,
            1429: 166,
            1430: 246,
            1431: 369,
            1432: 334,
            1433: 393,
            1434: 401,
            1436: 251,
            1438: 385,
            1439: 358,
            1440: 398,
            1442: 441,
            1444: 215,
            1446: 259,
            1448: 348,
            1449: 359,
            1450: 405,
            1451: 435,
            1453: 471,
            1454: 483,
            1456: 532,
            1458: 567,
            1461: 220,
            1462: 249,
            1463: 262,
            1468: 433,
            1469: 384,
            1470: 444,
            1471: 450,
            1472: 255,
            1474: 243,
            1475: 292,
            1476: 303,
            1477: 310,
            1478: 185,
            1479: 364,
            1480: 377,
            1481: 395,
            1482: 417,
            1483: 431,
            1484: 440,
            1487: 514,
            1489: 550,
            1490: 542,
            1495: 276,
            1497: 198,
            1498: 411,
            1499: 551,
            1500: 447,
            1501: 486,
            1502: 559,
            1503: 536,
            1505: 190,
            1506: 553,
            1508: 574,
            1509: 477,
            1510: 171,
            1511: 125,
            1513: 264,
            1516: 316,
            1517: 336,
            1518: 361,
            1519: 196,
            1520: 407,
            1522: 443,
            1523: 460,
            1524: 241,
            1525: 507,
            1526: 278,
            1527: 511,
            1528: 533,
            1529: 552,
            1530: 217,
            1531: 248,
            1532: 293,
            1533: 299,
            1534: 355,
            1535: 367,
            1536: 375,
            1540: 459,
            1541: 478,
            1542: 494,
            1543: 271,
            1546: 517,
            1547: 211,
            1548: 182,
            1549: 504,
            1551: 265,
            1553: 319,
            1554: 335,
            1555: 353,
            1556: 418,
            1557: 380,
            1558: 446,
            1559: 467,
            1560: 470,
            1561: 492,
            1562: 497,
            1563: 199,
            1564: 525,
            1565: 548,
            1566: 414,
            1567: 205,
            1568: 224,
            1569: 534,
            1570: 549,
            1571: 523,
            1574: 204,
            1575: 557,
            1576: 312,
            1578: 374,
            1580: 541,
            1581: 254,
            1582: 452,
            1583: 476,
            1584: 482,
            1585: 529,
            1586: 518,
            1588: 546,
            1589: 203,
            1590: 260,
            1591: 277,
            1592: 329,
            1595: 423,
            1596: 434,
            1597: 562,
            1598: 527,
            1599: 179,
            1600: 325,
            1601: 230,
            1602: 252,
            1603: 266,
            1604: 294,
            1605: 300,
            1606: 540,
            1607: 409,
            1608: 456,
            1609: 487,
            1610: 490,
            1611: 496,
            1612: 501,
            1613: 528,
            1614: 535,
            1615: 188,
            1617: 227,
            1618: 242,
            1619: 250,
            1620: 442,
            1621: 342,
            1622: 349,
            1624: 390,
            1626: 502,
            1627: 465,
            1628: 484,
            1629: 500,
            1630: 333,
            1631: 368,
            1633: 489,
            1634: 498,
            1635: 522,
            1636: 554,
            1639: 247,
            1642: 382,
            1643: 362,
            1644: 428,
            1645: 513,
            1647: 503,
            1648: 169,
            1649: 537,
            1651: 488,
            1652: 569,
            1653: 304,
            1654: 330,
            1655: 350,
            1656: 197,
            1657: 420,
            1658: 491,
            1659: 510,
            1660: 560,
            1661: 187,
            1663: 280,
            1664: 372,
            1665: 307,
            1666: 317,
            1667: 324,
            1668: 352,
            1671: 313,
            1672: 480,
            1673: 526,
            1674: 408,
            1675: 178,
            1677: 564,
            1678: 261,
            1679: 275,
            1680: 281,
            1681: 295,
            1682: 356,
            1683: 388,
            1684: 406,
            1685: 449,
            1686: 516,
            1687: 521,
            1688: 538,
            1689: 223,
            1690: 202,
            1691: 263,
            1692: 269,
            1693: 328,
            1694: 346,
            1695: 354,
            1697: 458,
            1698: 531,
            1699: 573,
            1700: 207,
            1701: 162,
            1702: 272,
            1703: 311,
            1704: 343,
            1705: 396,
            1706: 404,
            1707: 419,
            1708: 463,
            1709: 466,
            1710: 474,
            1711: 508,
            1712: 472,
            1713: 208,
            1714: 232,
            1715: 273,
            1716: 289,
            1717: 432,
            1719: 415,
            1720: 519,
            1721: 545,
            1723: 218,
            1724: 399,
            1725: 410,
            1726: 421,
            1727: 427,
            1728: 464,
            1729: 475,
            1730: 481,
            1731: 524,
            1733: 253,
            1734: 287,
            1735: 555,
            1736: 314,
            1738: 338,
            1740: 402,
            1741: 425,
            1742: 453,
            1743: 539,
            1744: 210,
            1745: 288,
            1746: 558,
            1747: 344,
            1748: 392,
            1749: 189,
            1750: 469,
            1752: 493,
            1753: 568,
            1754: 214,
            1755: 222,
            1756: 305,
            1757: 318,
            1758: 332,
            1759: 381,
            1760: 397,
            1761: 437,
            1762: 455,
            1764: 543,
            1765: 566,
            1766: 186,
            1768: 297,
            1769: 320,
            1770: 345,
            1771: 412,
            1772: 430,
            1773: 448,
            1775: 499,
            1776: 165,
            1777: 565,
            1778: 572,
            1779: 383,
            1780: 226,
            1781: 233,
            1782: 270,
            1783: 290,
            1784: 379,
            1785: 403,
            1786: 413,
            1787: 391,
            1788: 436,
            1790: 473,
            1791: 520,
            1792: 285,
            1793: 306,
            1794: 321,
            1795: 337,
            1797: 175,
            1798: 462,
            1799: 485,
            1800: 556,
            1801: 570,
            1802: 229,
            1805: 360,
            1806: 387,
            1807: 416,
            1808: 400,
            1809: 439,
            1810: 563,
            1811: 315,
            1812: 341,
            1813: 268,
            1814: 301,
            1817: 438,
            1818: 457,
            1819: 515,
            1820: 547,
            1821: 219,
            1822: 256,
            1823: 283,
            1824: 327,
            1825: 340,
            1826: 365,
            1892: 99,
            1893: 577,
            1894: 135,
            1896: 108,
            1897: 578,
            1898: 47,
            1900: 64,
            1904: 86,
            1905: 49,
            1907: 129,
            1910: 70,
            1912: 14,
            1916: 2,
            1918: 29,
            1919: 582,
            1920: 132,
            1921: 134,
            1923: 579,
            1925: 105,
            1928: 42,
            1929: 580,
            1930: 90,
            1933: 22,
            1935: 101,
            1937: 25,
            1939: 200,
            1940: 583,
            1941: 12,
            1943: 584,
            1944: 191,
            1945: 192,
            1947: 586,
            1948: 585,
            1949: 193,
            1950: 590,
            1952: 587,
            1953: 51,
            1954: 100,
            1955: 194,
            1956: 588,
            1957: 80,
            1958: 56,
            1959: 97,
            1963: 123,
            1964: 77,
            1967: 589,
            1970: 94,
            1971: 21,
            1974: 141,
            1975: 72,
            1976: 32,
            1978: 117,
            1979: 31,
            1982: 44,
            1983: 133,
            1985: 594,
            1988: 595,
            1989: 10,
            1991: 115,
            1992: 18,
            1993: 45,
            1994: 82,
            1995: 39,
            1996: 597,
            1997: 68,
            1998: 9,
            1999: 121,
            2000: 633,
            2001: 143,
            2003: 114,
            2004: 596,
            2005: 92,
            2006: 110,
            2007: 61,
            2008: 5,
            2009: 57,
            2010: 599,
            2011: 598,
            2012: 40,
            2014: 81,
            2015: 600,
            2016: 36,
            2017: 601,
            2020: 55,
            2021: 38,
            2022: 20,
            2024: 571,
            2025: 602,
            2026: 28,
            2027: 84,
            2028: 104,
            2029: 83,
            2030: 34,
            2031: 603,
            2032: 604,
            2033: 23,
            2034: 33,
            2036: 180,
            2037: 75,
            2038: 181,
            2039: 142,
            2041: 50,
            2042: 128,
            2043: 605,
            2044: 41,
            2045: 53,
            2046: 113,
            2047: 60,
        }

        dic_edital = {32: 7, 33: 6, 22: 4, 23: 1, 25: 3, 26: 2, 27: 5, 30: 8}

        # copia arquivos do edital
        source_item = os.path.join(settings.BASE_DIR, 'upload/projetos/edital/')
        dest_item = os.path.join(settings.BASE_DIR, 'upload/pesquisa/edital/')
        copy_dir(source_item, dest_item, dic_edital)
        #
        # #copia arquivos do projeto
        source_item = os.path.join(settings.BASE_DIR, 'upload/projetos/projeto/')
        dest_item = os.path.join(settings.BASE_DIR, 'upload/pesquisa/projeto/')
        copy_dir(source_item, dest_item, dic_projeto_anexo, dic_projeto)

        # #copia arquivos do projeto
        source_item = os.path.join(settings.BASE_DIR, 'upload/projetos/edital/anexos')
        dest_item = os.path.join(settings.BASE_DIR, 'upload/pesquisa/edital/')
        copy_dir(source_item, dest_item, dic_edital_anexo, dic_edital, True)


# -- relacionamento ids de projetos
# alter table pesquisa_projeto add column id_legado int;
#
# update pesquisa_projeto p set id_legado = pl.id
# from projetos_projeto_legado pl
# where
# pl.coordenador_id = p.coordenador_id
# and pl.titulo = p.titulo
# and pl.data_validacao_pontuacao = p.data_validacao_pontuacao;
# /*
# select p.id, pl.id as id_legado from projetos_projeto_legado pl
# inner join pesquisa_projeto p on
# pl.coordenador_id = p.coordenador_id
# and pl.titulo = p.titulo
# and pl.data_validacao_pontuacao = p.data_validacao_pontuacao
#
# */
#
#
# -- relacionamento ids de editais
# alter table pesquisa_edital add column id_legado int;
#
# update pesquisa_edital e set id_legado = el.id
# from projetos_edital_legado el
# where
# el.titulo = e.titulo;
# /*
# select e.id, el.id as id_legado from projetos_edital_legado el
# inner join pesquisa_edital e
# on
# el.titulo = e.titulo
# */
#
#
# --exclui edital anexo de extensao
# delete from projetos_editalanexo_legado eal where eal.edital_id not in (select id_legado from pesquisa_edital);
#
# -- cria edital_id_legado para editalanexo
# alter table pesquisa_editalanexo add column edital_id_legado int
# update pesquisa_editalanexo ea set edital_id_legado = e.id_legado
# from pesquisa_edital e
# where ea.edital_id = e.id;
#
#
# -- relacionamento ids de  editalanexo
# alter table pesquisa_editalanexo add column id_legado int;
#
# update pesquisa_editalanexo ea set id_legado = eal.id
# from projetos_editalanexo_legado eal
# where  eal.edital_id = ea.edital_id_legado
# and eal.nome = ea.nome
# and eal.tipo_membro = ea.tipo_membro
# and eal.vinculo = ea.vinculo
# and eal.ordem = ea.ordem;
# /*
# select eal.* from projetos_editalanexo_legado eal
# inner join pesquisa_editalanexo ea
# on eal.edital_id = ea.edital_id_legado
# and eal.nome = ea.nome
# and eal.tipo_membro = ea.tipo_membro
# and eal.vinculo = ea.vinculo
# and eal.ordem = ea.ordem
# */
#
#
# alter table pesquisa_projetoanexo add column anexo_edital_id_legado int;
# update pesquisa_projetoanexo pa set anexo_edital_id_legado = ea.id_legado
# from pesquisa_editalanexo ea
# where pa.anexo_edital_id = ea.id
#
# alter table pesquisa_projetoanexo add column projeto_id_legado int ;
# update pesquisa_projetoanexo pa set projeto_id_legado = pp.id_legado
# from pesquisa_projeto pp
# where pa.projeto_id = pp.id
#
# delete from projetos_projetoanexo_legado where projeto_id not in (select id_legado from pesquisa_projeto)
#
#
# alter table pesquisa_projetoanexo add column id_legado int;
# update pesquisa_projetoanexo pa set id_legado = pal.id
# from projetos_projetoanexo_legado pal
# where pal.projeto_id = pa.projeto_id_legado
# and pal.anexo_edital_id = pa.anexo_edital_id_legado
# and pal.arquivo_id = pa.arquivo_id
# and pal.membro_equipe_id = pa.membro_equipe_id;
#
#
# alter table pesquisa_editalanexoauxiliar add column id_legado int;
# update pesquisa_editalanexoauxiliar eaa set id_legado = eaal.id
# from projetos_editalanexoauxiliar_legado eaal
# where eaal.arquivo_id = eaa.arquivo_id;
#
# /*
# select eaal.* from projetos_editalanexoauxiliar_legado eaal
# inner join pesquisa_editalanexoauxiliar eaa on eaal.arquivo_id = eaa.arquivo_id
# */
#
